{% extends "base.html" %}
{% load i18n react_comments react_rates thumbnail%}

{% block title %}{{idea.name}}{% endblock %}
{% block content %}
<div class="container-narrow">
    <div class="action-bar">
        <nav class="navbar navbar-default navbar-static">
            <ul class="nav navbar-nav">
                <li>
                    <a href="{% url 'project-detail' idea.project.slug %}"><i class="fa fa-arrow-left" aria-hidden="true"></i> {% trans 'back to project' %}</a>
                </li>
            </ul>
            {% if request.user == idea.creator and view.crud_enabled or request.user.is_superuser %}
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a id="drop" href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">  <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="drop">
                        <li>
                            <a href="{% url 'idea-update' idea.slug %}">{% trans 'Edit' %}</a>
                        </li>
                        <li role="separator" class="divider"></li>
                        <li>
                            <a href="" data-toggle="modal" data-target="#myModal">{% trans 'Delete' %}</a>
                        </li>
                    </ul>
                </li>
            </ul>
            {% endif %}
        </nav>
    </div>

    {% if idea.image %}
    <img class="idea-image" src="{{ idea.image.url }}" style="width: 100%;">
    {% endif %}

    <div class="idea-body">
        <div class="idea-title">
            <h1>{{ idea.name }}</h1>
        </div>

        <div class="avatar-small">
            {% if idea.creator.avatar %}
            <img src="{{ idea.creator.avatar | thumbnail_url:'avatar_small' }}"></img>
            {% else %}
            <img src=""></img>
            {% endif %}
            <div class="name">{{ idea.creator.username }}</div>
        </div>

        <div class="idea-description">
            <p>{{ idea.description |safe }}</p>
        </div>

        {% react_rates idea view.rate_enabled %}

        {% react_comments idea view.comment_enabled %}
    </div>
</div>

{% include "euth_ideas/includes/modal.html" with idea=idea %}

{% endblock %}
